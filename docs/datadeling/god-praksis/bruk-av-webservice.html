<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<title data-rh="true">Anbefalinger rundt Webservice | Datadeling Test</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Anbefalinger rundt Webservice | Datadeling Test"><meta data-rh="true" name="description" content="Fellestjenesten fokuserer pÃ¥ teknologi kalt Webservice (WS), og anbefaler"><meta data-rh="true" property="og:description" content="Fellestjenesten fokuserer pÃ¥ teknologi kalt Webservice (WS), og anbefaler"><link data-rh="true" rel="icon" href="/datadeling-docs-tmp/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice"><link data-rh="true" rel="alternate" href="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice" hreflang="en"><link data-rh="true" rel="alternate" href="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice" hreflang="x-default"><link rel="stylesheet" href="/datadeling-docs-tmp/assets/css/styles.d37e78f4.css">
<link rel="preload" href="/datadeling-docs-tmp/assets/js/runtime~main.3b8f53f6.js" as="script">
<link rel="preload" href="/datadeling-docs-tmp/assets/js/main.77e44f98.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/datadeling-docs-tmp/"><div class="navbar__logo"><img src="/datadeling-docs-tmp/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/datadeling-docs-tmp/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Datadeling</b></a><a class="navbar__item navbar__link navbar__link--active" href="/datadeling-docs-tmp/docs/intro">Dokumentasjon</a></div><div class="navbar__items navbar__items--right"><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/datadeling-docs-tmp/docs/intro">Test av dokumentasjonen til prosjekt Datadeling</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/datadeling-docs-tmp/docs/datadeling">datadeling</a><button aria-label="Toggle the collapsible sidebar category &#x27;datadeling&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/begreper">begreper</a><button aria-label="Toggle the collapsible sidebar category &#x27;begreper&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/erfaringer">erfaringer</a><button aria-label="Toggle the collapsible sidebar category &#x27;erfaringer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/faq">SpÃ¸rsmÃ¥l og svar</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/god-praksis">god-praksis</a><button aria-label="Toggle the collapsible sidebar category &#x27;god-praksis&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/api-design">API-design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice">Anbefalinger rundt Webservice</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/datakvalitet">datakvalitet</a><button aria-label="Toggle the collapsible sidebar category &#x27;datakvalitet&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/informasjonsforvaltning/api-tilganger">informasjonsforvaltning</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/integrasjonsmonster">integrasjonsmonster</a><button aria-label="Toggle the collapsible sidebar category &#x27;integrasjonsmonster&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/notifikasjonsdesign">notifikasjonsdesign</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/kode">Kode som bruker IntArk</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/malgrupper/anskaffer">malgrupper</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/om">om</a><button aria-label="Toggle the collapsible sidebar category &#x27;om&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/prinsippene">Integrasjonsprinsippene for IntArk</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/styringsregler">Styringsreglene til IntArk</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/teknisk-plattform">teknisk-plattform</a><button aria-label="Toggle the collapsible sidebar category &#x27;teknisk-plattform&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/unntak">UnntakshÃ¥ndtering</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere">veiledere</a><button aria-label="Toggle the collapsible sidebar category &#x27;veiledere&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/datadeling-docs-tmp/">ğŸ </a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/datadeling-docs-tmp/docs/datadeling">datadeling</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/datadeling-docs-tmp/docs/datadeling/god-praksis">god-praksis</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice">Anbefalinger rundt Webservice</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Anbefalinger rundt Webservice</h1></header><p>Fellestjenesten fokuserer pÃ¥ teknologi kalt <em>Webservice</em> (WS), og anbefaler
denne teknologien for Ã¥ dele data.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="hva-er-en-webservice">Hva er en Webservice?<a class="hash-link" href="#hva-er-en-webservice" title="Direct link to heading">â€‹</a></h2><p>En Webservice (WS) er en del av en tjeneste som tilbyr et standardisert
grensesnitt
(<a href="https://en.wikipedia.org/wiki/Application_programming_interface" target="_blank" rel="noopener noreferrer">API</a>) for Ã¥
lese- og/eller skrive tjenestens data. WS bruker web-basert teknologi, som
HTTP. En WS kan vÃ¦re en del av tjenesten eller en lÃ¸srevet komponent med eget
livslÃ¸p.</p><p><img loading="lazy" alt="Eksempel pÃ¥ en webservice som konsumenter snakker med" src="/datadeling-docs-tmp/assets/images/ws-forklart-cf592fdf5080d788babbbc4fed9e21a9.png" width="866" height="428"></p><p><em>Konsumenter spÃ¸r kildens WS om data. Flere konsumenter kan benytte samme WS.</em></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="en-ws-basert-modell">En WS-basert modell<a class="hash-link" href="#en-ws-basert-modell" title="Direct link to heading">â€‹</a></h2><p>Datatilbydere er ansvarlig for Ã¥ tilby sine data gjennom et API, som
konsumenten kan bruke. Konsumentene fÃ¥r kun tilgang til de funksjonene som
avtales pÃ¥ forhÃ¥nd.</p><p><img loading="lazy" alt="Illustrasjon av en WS sitt API, og konsumenter som leser data" src="/datadeling-docs-tmp/assets/images/ws-api-26664470ed7580077a1124c6c649b42d.png" width="844" height="598"></p><p>API-et bÃ¸r utformes med fokus pÃ¥ hva som er virksomhetens data, og forenkles
der det er mulig. API-et mÃ¥ for eksempel ikke eksponere interne datastrukturer,
men noe som er forstÃ¥elig og funksjonelt for utenforstÃ¥ende. Interne data,
som ikke er interessante for andre, eksponeres ikke.Â </p><p>API-et bÃ¸r ogsÃ¥ utformes etter hva som er de generelle behovene, og ikke
behov/Ã¸nsker som gjelder en enkelt konsument. Spesialtilpasninger bÃ¸r ligge hos
konsumenten og ikke datatilbyder.</p><p>I etableringen av en WS-basert integrasjon vil kostnaden knyttet vÃ¦re likt
eller dyrere sammenlignet med andre mÃ¥ter Ã¥ integrere pÃ¥ (for eksempel
filbasert eller leverandÃ¸r-spesifikk svart-boks-integrasjoner). Det er nÃ¥r
WS-en allerede tilbyr et rikt API at datatilbyde vil se gevinsten: Konsumenter
kan selv skaffe data gjennom WS-en, uten Ã¥ trenge spesialtilpasninger fra
datatilbyder. En bonuseffekt er at konsumenter ikke trenger Ã¥ mÃ¥tte vente pÃ¥
utvikling hos datatilbyder.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="meldingskÃ¸-mq">MeldingskÃ¸ (MQ)<a class="hash-link" href="#meldingskÃ¸-mq" title="Direct link to heading">â€‹</a></h3><p>En meldingskÃ¸ (MQ) er en tjeneste som gir kilderÂ mulighet til Ã¥ sende beskjed
om at data er endret. I eldre integrasjoner baserer man seg ofte pÃ¥
fulldumper â€“ altsÃ¥ filer med alle data en konsument trenger. Dette er kostbart,
sÃ¥rbart og tregt. Med en meldingskÃ¸ er tanken at en kilde sender ut en
notifikasjon nÃ¥r data har endret seg, som kan vÃ¦re av interesse for
konsumenter. Notifikasjonen er ikke nÃ¸dvendigvis informasjonsbÃ¦rende nok til at
konsumenten kan foreta en endring, men forteller konsumenten at den mÃ¥ hente
data pÃ¥ nytt for Ã¥ sjekke egne data mot den autoritative kilden. Dette gjÃ¸res
med en lenke til det berÃ¸rte objektet.</p><p><img loading="lazy" alt="Illustrasjon av meldingskÃ¸, tilbydere og konsumenter" src="/datadeling-docs-tmp/assets/images/mq-flyt-d61a42ce065ae6cd07265e1b786e6561.png" width="1024" height="510"></p><p>Notifikasjoner sendes fra kildene inn til meldingskÃ¸en. Konsumentene velger
selv hvilke notifikasjoner de Ã¸nsker Ã¥ abonnere pÃ¥.</p><p>Notifikasjoner skalÂ ikke inneholde utfyllende informasjon, av flere grunner:</p><ul><li><p>FÃ¦rre personopplysninger i notfikasjoner forenkler tilgangsstyringen.
Spesielt personopplysninger som krever ekstra beskyttelse ville kunne skapt
utfordringer for meldingskÃ¸er.</p></li><li><p>Notifikasjonene blir mindre tidskritiske, dÃ¥ konsumenter blir tvunget til Ã¥
hente korrekt og oppdatert informasjon fra datatilbyders API. For eksempel
unngÃ¥r du at en gammel notifikasjon om at et objekt har blitt slettet ville
fÃ¸rt til at konsumenten slettet objektet - det kan hende at objektet i
mellomtiden har blitt gjenopprettet.</p></li><li><p>Dette er et enkelt integrasjonsmÃ¸nster som spesielt passer for
provisjoneringer.</p></li></ul><p><img loading="lazy" src="/datadeling-docs-tmp/assets/images/ws-mq-sirkel-4bd045e962bb27a031ce3cb8a351aca0.png" width="814" height="434"></p><p>Kilden sender en notifikasjon til en meldingskÃ¸ som videresender denne til
konsumenter som abonnerer pÃ¥ denne typen notifikasjoner. Notifikasjonen sier at
konsumenten mÃ¥ hente data om en entitet for Ã¥ se om endringen skal reflekteres
i konsumenten.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="autoritativ-kilde">Autoritativ kilde<a class="hash-link" href="#autoritativ-kilde" title="Direct link to heading">â€‹</a></h3><p>Datatilbydere bÃ¸r i utgangspunktet bare tilby data de er autoritative for, som
vil si at det er denne tjenesten som <em>eier</em> denne typen data hos institusjonen</p><ul><li>sÃ¥kalt <em>masterdata</em> eller <em>kildedata</em>. Eierskapet besluttes av institusjonen
selv.</li></ul><p>Dette betyr at WS-en i utgangspunktet bare bÃ¸r eksponere data som tjenesten er
autoritativ for. Det sier ogsÃ¥ at konsumenter mÃ¥ hente data frÃ¥ autoritativ
kilde, og ikke via andre tjenester. Unntaket er velbrukte katalogtjenester der
data tilbys pÃ¥ vegne av andre datatilbydere.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="hvem-mÃ¥-haen-ws">Hvem mÃ¥ haÂ en WS?<a class="hash-link" href="#hvem-mÃ¥-haen-ws" title="Direct link to heading">â€‹</a></h2><p>Ikke alle tjenester mÃ¥ ha en WS. Kravet om WS inntreffer hovedsaklig nÃ¥r en
kilde sitter pÃ¥ data som andre tjenester burde hatt tilgang til. Har kilden
svÃ¦rt fÃ¥ integrasjoner og dette ikke vil Ã¸ke i fremtiden sÃ¥ vil
integrasjonsarkitekturprinsippene heller ikke kreve en WS foran kilden. Det gir
for lite avkastning pÃ¥ investeringen.</p><p>WS vil enten vÃ¦re pÃ¥krevd eller svÃ¦rt nyttig der tjenesten er en autoritativ
kilde for data som andre trenger innsyn i, eller der tjenesten fungerer som en
del av en annen tjeneste.Â </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="datalager">Datalager<a class="hash-link" href="#datalager" title="Direct link to heading">â€‹</a></h3><p>Integrasjoner er ikke alltid det Ã¥ flytte data fra A til B, sÃ¥kalt replisering.
Sammensatte tjenester der man utnytter en tjenesteorientert arkitektur vil
kunne bygge pÃ¥ andre tjenester. En tjeneste kan for eksempel bruke en annen
tjeneste som sitt <em>datalager</em>. I stedet for Ã¥ replikere data fra kilden, og
sette opp en database for det, kan tjenesten heller bruke kildens WS direkte.</p><p><img loading="lazy" alt="Illustrasjon av tjeneste som bruker ekstern WS som datalager" src="/datadeling-docs-tmp/assets/images/datalager-7a148c7f255482d72e1b8b8a14c37025.png" width="566" height="810"></p><p>En tjeneste, bestÃ¥ende av et brukergrensesnitt, et logisk lag og en database,
benytter en ekstern kilde som en del av sitt datalag.</p><p>Ã… bruke en WS som et datalager kan gjÃ¸re det enklere, raskere og mindre
kostbart Ã¥ bygge nye tjeneste, men ogsÃ¥ en mindre komplisert arkitektur.
Ulempen er at det setter hÃ¸yere krav til kildens oppetid, ytelse og
skalerbarhet.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="hvordan-skalet-api-i-en-ws-se-ut">Hvordan skalÂ et API i en WS se ut?<a class="hash-link" href="#hvordan-skalet-api-i-en-ws-se-ut" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="restful">RESTful<a class="hash-link" href="#restful" title="Direct link to heading">â€‹</a></h3><p><a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener noreferrer">REST</a>Â er en
metodikk for Ã¥ sikre lÃ¸se koblinger mellom to tjenester i en integrasjon. Selv
om REST ofte benytter HTTP som den underliggende protokollen for integrasjonen,
er ikke REST begrenset til dette.</p><p>For Ã¥ sikre at man ikke viderefÃ¸rer gamle, tett koblede integrasjoner i den nye
integrasjonsarkitekturen, bÃ¸r tjenesteeiere og -utviklere etterstrebe Ã¥ lage
grensesnitt som er sÃ¥ <em>RESTfulle</em> som mulig.</p><p>SÃ¥ hva er RESTful? Det kan deles inn i fire nivÃ¥er, der det er opp til
datatilbyderÂ og -utvikler Ã¥ bestemme hvor RESTful API-et skal vÃ¦re. Anbefalt
minimumsnivÃ¥ er nivÃ¥ 2.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="nivÃ¥-0-rpc-over-http">NivÃ¥ 0: RPC over HTTP<a class="hash-link" href="#nivÃ¥-0-rpc-over-http" title="Direct link to heading">â€‹</a></h4><p>PÃ¥ dette nivÃ¥et ligger REST API-er som ikke egentlig er REST. Man har
implementert typiske
<a href="https://en.wikipedia.org/wiki/Remote_procedure_call" target="_blank" rel="noopener noreferrer">RPC</a>-kall over HTTP og
kaller dette REST. Det resulterende API-et blir spesialisert og lite
gjenbrukbart. Typisk forsÃ¸ker man Ã¥ tilby funksjonalitet i API-et tatt helt
bokstavlig fra en bestilling. Ã˜nsker konsument en Ã¥ hente fornavn pÃ¥ en person
sÃ¥ lager man en funksjon for dette. Konsument to Ã¸nsker hele navnet sÃ¥ da lager
man en ny funksjon. Konsument tre Ã¸nsker en liste med alle navnetyper, samt
muligheten til Ã¥ oppdatere navn sÃ¥ da lages det flere funksjoner for alt dette.
Data blir tilgjengeliggjort, men man ender opp med tette koblinger og lite til
ingen gjenbruk.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="nivÃ¥-1-ressurser">NivÃ¥ 1: Ressurser<a class="hash-link" href="#nivÃ¥-1-ressurser" title="Direct link to heading">â€‹</a></h4><p>PÃ¥ nivÃ¥ 1 begynner man Ã¥ omfavne RESTful. Isteden for spesialiserte kall for
enhver handling som omhandler en ressurs eller entitet sÃ¥ samler man disse i en
felles <em>ressurs</em>. I eksemplet med navn pÃ¥ en person fra nivÃ¥ 0 sÃ¥ samler man
navn under stien/endepunktet <strong>persons/mathias/names</strong>. Under dette omrÃ¥det
samler man de funksjoner som omhandler navn.</p><p>Dette er en bedre lÃ¸sning enn i nivÃ¥ 0, men fortsatt utsatt for spesialiserte
funksjoner og manglende gjenbruk. Vi anbefaler en ressursdrevet (datadrevet)
modell der ressurser i form av data bestemmer mer av strukturen pÃ¥ API-et
heller enn en mer tilfeldig modell basert pÃ¥ hvem som spurte om hva nÃ¥r.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="nivÃ¥-2-http-verb">NivÃ¥ 2: HTTP verb<a class="hash-link" href="#nivÃ¥-2-http-verb" title="Direct link to heading">â€‹</a></h4><p>PÃ¥ dette nivÃ¥et har API-et modnet betraktelig. Om man implementerer et nivÃ¥ 2
API sÃ¥ er ikke API-et fullt ut RESTful, men det er likevel av en slik kvalitet
at det oppfyller kravene fra fellestjenesten for datadeling. Det vil vÃ¦re
modulÃ¦rt, datadrevet og gjenbrukbart.</p><p>Vi utvider eksemplene med personnavn fra nivÃ¥ 1 med at HTTP-verbet bestemme
operasjonen man gjÃ¸r pÃ¥ navn.Â <strong>GET persons/mathias/names</strong> vil gi en liste
URL-er med de navn som er registrert for personen &quot;mathias&quot;. En endring eller
sletting gjÃ¸res med HTTP-verbene DELETE, POSTÂ eller PUT. Behovet for
spesialiserte funksjoner blir minimalt da dataene selv representeres som
ressurser og man kan lese og skrive til disse ressursene.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="nivÃ¥-3hypermedia-controlshateoas">NivÃ¥ 3:Â Hypermedia Controls/HATEOAS<a class="hash-link" href="#nivÃ¥-3hypermedia-controlshateoas" title="Direct link to heading">â€‹</a></h4><p>For et ekte RESTful API sÃ¥ skal API-et i WS-en vÃ¦re den kontrollerende aktÃ¸ren
i integrasjonen. Dette vil si at i eksemplet med navn sÃ¥ vil utseendet pÃ¥
API-et endre seg i forhold til kontekst. For konsument 1, som kun skal hente
fornavn pÃ¥ personer, sÃ¥ viser API-et kun dette. For konsument 3, som Ã¸nsker
alle navnetyper, samt mulighet til Ã¥ oppdatere navn, sÃ¥ vil kallet som
returnerer listen ogsÃ¥ inkludere lenker til hvordan konsumenten kan oppdatere
navn. For de navn som ikke finnes vil det bli sendt med lenker til hvor
konsumenten kan opprette disse navnene. API-et gir fra seg informasjon om
tilstanden pÃ¥ data og tilgangene konsumenten har til data. Dette gir navn til
det velklingende akronymetÂ <strong>HATEOAS</strong> (Hypertext As The Engine Of Application
State).Â </p><p>Ã… implementere etÂ ekte RESTful API er ressurskrevende. Det er ofte ikke verdt
den ekstra innsatsen Ã¥ ta steget fra nivÃ¥ 2 til 3, da nivÃ¥ 2 gir det stÃ¸rste
hoppet i gevinster i datadeling. NivÃ¥ 3 kan gjÃ¸re det enklere Ã¥ lage nye
konsumerende tjenester, men det er ogsÃ¥ en fare for at datatilbyderen begynner
Ã¥ lage spesialtilpasninger per konsument hvis det ikke implementeres riktig.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="entitetsbasert-api">Entitetsbasert API<a class="hash-link" href="#entitetsbasert-api" title="Direct link to heading">â€‹</a></h3><p>Entitet- eller ressursbasert, som nevnt under nivÃ¥ 1 under RESTful, handler om
Ã¥ bevege seg bort fra <strong>operasjonen</strong>Â man skal gjÃ¸re og heller se
pÃ¥Â <strong>data</strong>Â man skal gjÃ¸re noe med. Mange uttrekk og funksjoner i dag
erÂ resultatet av at man skal gjÃ¸re noe bestemt. Konsumenter trenger sammensatte
uttrekk fra konsumenter og skal ikke ha for mye eller for lite data. Dataene
skal formateres pÃ¥ bestemte mÃ¥ter og svÃ¦rt sjeldent kan to ulike konsumenter
benytte de samme uttrekkene.</p><p>Ã… si at API-er skal vÃ¦re entitetsbaserte (evt. ressursbaserte) vil si at man
heller eksponerer typiske entiteter fra kilden heller enn ferdige uttrekk. Om
en konsument trenger informasjon om ansatte og deres organisasjonstilhÃ¸righet
sÃ¥ kan dette realiseres med entiteteneÂ <em>employees</em>ogÂ <em>organisational units</em>.
Relasjonen mellom den ansatte og organisasjon realiseres som attributter i en
eller begge entiteter. Det er opp til eiere, forvaltere og utviklere for en
kilde om hva som er en entitet eller ressurs. Eksempelvis kan man si at en
brukerkonto er en entitet, mens et brukernavn kun er et attributt ved denne
brukerkontoen. En gruppe er en entitet, mens gruppenavnet og medlemskap er
attributter til gruppen.</p><p>For funksjoner som aldri kan vÃ¦re datadrevne â€“Â  som start/stopp-funksjonalitet
â€“ er det opp til tjenesteeier for hvordan man realiserer dette.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="funksjonelt-api">Funksjonelt API<a class="hash-link" href="#funksjonelt-api" title="Direct link to heading">â€‹</a></h3><p>Et funksjonelt API, til forskjell fra <a href="https://en.wikipedia.org/wiki/Functional_programming" target="_blank" rel="noopener noreferrer">funksjonell
programmering</a>, omhandler
at designet av API-et skal vÃ¦re forstÃ¥elig og brukbartÂ for utenforstÃ¥ende.
Utviklere av konsumenter sitter ikke med den domenekunnskapen som de som jobber
med en kilde gjÃ¸r. Dette betyr at API-er inn mot kilder bÃ¸r forenkles slik at
de gir mening for utenforstÃ¥ende, men ikke mer enn at informasjon som er
nÃ¸dvendig for konsumenter gÃ¥r tapt.</p><p>Et eksempel kan vÃ¦re den aktive studentmassen pÃ¥ institusjonen. Ulike
konsumenter kan vÃ¦re interessert i ulike mengder studenter slik at API-et mÃ¥ gi
et rikt utplukk studenter, men konsumentene vet ikke reglene som omhandler
betalt semesteravgift, oppmeldt studieprogram eller enkeltemne, samt andre
regler som bestemmer om studenter regnes som &quot;aktive&quot; studenter. API-et mÃ¥
kunne realiseres som enten Ã¥ ha et attributt som sier &quot;aktiv&quot; pÃ¥ ressursen
student, eller eksponere alle tilhÃ¸rende attributterÂ som avgjÃ¸r om studenten er
aktiv i andre enden av skalaen. Sannsynligvis ligger den beste lÃ¸sningen et
sted i midten, der man bÃ¸r eksponere mye av de tilhÃ¸rende data, men pÃ¥ en slik
mÃ¥te at konsumenten kan forstÃ¥ informasjonen heller enn Ã¥ lÃ¦re seg de interne
strukturene i kilden.</p><p>Her kommer referansearkitekturen sin fÃ¸ring pÃ¥ indre og ytre API til nytte:
Indre API vil nÃ¸dvendigvis eksponere flere attributter, mens ytre API forenkler
etter hvilken kontekst det lages for. For eksempel vil et indre API eksponere
alle attributtene som ligger til grunn for om en student er aktiv, mens et ytre
API kanskje bare eksponerer aktive studenter, eller gir et enkelt flagg som
forteller at studenten er aktiv.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="hvorfor-anbefale-webservice">Hvorfor anbefale Webservice?<a class="hash-link" href="#hvorfor-anbefale-webservice" title="Direct link to heading">â€‹</a></h2><p>Hensikten med Ã¥ bruke en WS-basert integrasjonsarkitektur er primÃ¦rt Ã¥ kvitte
seg med flaskehalser i organisasjonen og forhindre dobbeltarbeid. Dette er
sammenlignet med hvordan mange integrasjoner er gjort tidligere.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="hub--spoke-modellen">Hub &amp; spoke-modellen<a class="hash-link" href="#hub--spoke-modellen" title="Direct link to heading">â€‹</a></h3><p>En Tidligere integrasjoner  basert pÃ¥ en sÃ¥kalt &quot;hub&amp;spoke&quot;-modell der
datakilden er ansvarlig for Ã¥ levere fra segÂ de data som en konsument trenger.
Ã…rsakene til at dette har blitt en sÃ¥ vanlig modell for integrasjon er mange,
der de viktigste er:</p><ul><li>sikkerhet - kun de ansvarlige for kilden skal fÃ¥ tilgang til dataene i kilden</li><li>kompleksitet - kun de ansvarlige for kilden forstÃ¥r datamodellen i kilden</li><li>sentralisering - som en fÃ¸lge av sentralisering av data sÃ¥ blir integrasjonene ogsÃ¥ sentraliserte</li><li>tradisjon - slik at man &quot;alltid&quot; gjort integrasjon</li></ul><p><img loading="lazy" src="/datadeling-docs-tmp/assets/images/hub-forklart-52d262e871601624628043e2b051502d.png" width="826" height="622"></p><p>Kilden er ansvarlig for Ã¥ gi konsumentene data. Ofte gjÃ¸res dette ved at komponenter i kilden genererer filer som sendes til konsumenten<em>.</em></p><p>Det er store utfordringer knyttet til en slik &quot;hub&amp;spoke&quot;-modell.
Sentralisering av data er et veldig fornuftig valg for Ã¥ bekjempe dÃ¥rlig
datakvalitet og sikre en autoritativ kilde som konsumenter kan forholde seg
til. Sentralisering av integrasjonene nyter ikke de samme godene:</p><ul><li>De tekniske ressursene tilknyttet kilden blir bundet opp i enkeltprosjekter, andre prosjekter mÃ¥ vente.</li><li>En endring ute i en konsument medfÃ¸rer at ressurser mÃ¥ endre pÃ¥ kilden.</li><li>Kilden mÃ¥ alltid ha mangeÂ tekniske ressurser tilknyttet for Ã¥ klare arbeidsmengden.</li><li>Prosjekter fÃ¥r store skjulte kostnader fordi ressurser i kilden mÃ¥ gjÃ¸re integrasjonen.</li><li>Prosjekter blir forsinket da det sjelden er nok tekniske ressurser tilknyttet kilden og ingen andre enn disse ressursene kan gjÃ¸re integrasjonen.</li></ul><p>To av problemene som har medfÃ¸rt at &quot;hub&amp;spoke&quot;-modellen har blitt sÃ¥ utbredt
er sikkerhet og kompleksitet. Uten grensesnitt som adresserer disse problemene
sÃ¥ vil det vÃ¦re vanskelig Ã¥ gjÃ¸re en omfattende endring i hvordan UiO gjÃ¸r
integrasjon. Sikkerhetsproblemet bestÃ¥r i hovedsak at systemeiere ikke vil
tillate andre tilganger rett i databaser eller til API-er inne i tjenesten. Det
er lite eller ingen tilgangskontroll sÃ¥ skal noen ha tilgang til noe sÃ¥ fÃ¥r de
det til alt - gjerne ogsÃ¥ muligheten til Ã¥ endre data.Â </p><p>Kompleksitetsproblemene er ofte at internt i en tjeneste sÃ¥ er data strukturert
pÃ¥ en slik mÃ¥te at de gir mening for systemeiere og ressurser tilknyttet
tjenesten, men ikke utenforstÃ¥ende. SÃ¥ selv om man gir tilgang til en kilde sÃ¥
betyr ikke det at konsumenten skjÃ¸nner hva kilden tilbyr eller fÃ¥r gale data.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/jokim/datadelingsdokumentasjon/tree/master/docs/datadeling/god-praksis/bruk-av-webservice.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/api-design"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">API-design</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/datakvalitet"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Anbefalinger for god datakvalitet</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#hva-er-en-webservice" class="table-of-contents__link toc-highlight">Hva er en Webservice?</a></li><li><a href="#en-ws-basert-modell" class="table-of-contents__link toc-highlight">En WS-basert modell</a><ul><li><a href="#meldingskÃ¸-mq" class="table-of-contents__link toc-highlight">MeldingskÃ¸ (MQ)</a></li><li><a href="#autoritativ-kilde" class="table-of-contents__link toc-highlight">Autoritativ kilde</a></li></ul></li><li><a href="#hvem-mÃ¥-haen-ws" class="table-of-contents__link toc-highlight">Hvem mÃ¥ haÂ en WS?</a><ul><li><a href="#datalager" class="table-of-contents__link toc-highlight">Datalager</a></li></ul></li><li><a href="#hvordan-skalet-api-i-en-ws-se-ut" class="table-of-contents__link toc-highlight">Hvordan skalÂ et API i en WS se ut?</a><ul><li><a href="#restful" class="table-of-contents__link toc-highlight">RESTful</a></li><li><a href="#entitetsbasert-api" class="table-of-contents__link toc-highlight">Entitetsbasert API</a></li><li><a href="#funksjonelt-api" class="table-of-contents__link toc-highlight">Funksjonelt API</a></li></ul></li><li><a href="#hvorfor-anbefale-webservice" class="table-of-contents__link toc-highlight">Hvorfor anbefale Webservice?</a><ul><li><a href="#hub--spoke-modellen" class="table-of-contents__link toc-highlight">Hub &amp; spoke-modellen</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 HK-dir, Unit, Uninett AS</div></div></div></footer></div>
<script src="/datadeling-docs-tmp/assets/js/runtime~main.3b8f53f6.js"></script>
<script src="/datadeling-docs-tmp/assets/js/main.77e44f98.js"></script>
</body>
</html>