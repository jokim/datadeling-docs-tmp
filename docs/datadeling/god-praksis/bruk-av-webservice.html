<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<title data-react-helmet="true">Webservice â€“ hva og hvordan | Datadeling Test</title><meta data-react-helmet="true" property="og:url" content="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Webservice â€“ hva og hvordan | Datadeling Test"><meta data-react-helmet="true" name="description" content="UiOs nye integrasjonsarkitektur er basert pÃ¥ teknologi kaltÂ **Webservice**. Dette dokumentet forklarer grunnen for dette teknologivalget, hvordan Webservice (WS) passer inn i arkitekturen og gir retningslinjer for hvordan man best realiserer en WS for sin tjeneste."><meta data-react-helmet="true" property="og:description" content="UiOs nye integrasjonsarkitektur er basert pÃ¥ teknologi kaltÂ **Webservice**. Dette dokumentet forklarer grunnen for dette teknologivalget, hvordan Webservice (WS) passer inn i arkitekturen og gir retningslinjer for hvordan man best realiserer en WS for sin tjeneste."><link data-react-helmet="true" rel="shortcut icon" href="/datadeling-docs-tmp/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice"><link data-react-helmet="true" rel="alternate" href="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice" hreflang="x-default"><link rel="stylesheet" href="/datadeling-docs-tmp/assets/css/styles.b121cd8c.css">
<link rel="preload" href="/datadeling-docs-tmp/assets/js/runtime~main.55f61790.js" as="script">
<link rel="preload" href="/datadeling-docs-tmp/assets/js/main.7b16ab79.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/datadeling-docs-tmp/"><img src="/datadeling-docs-tmp/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/datadeling-docs-tmp/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Datadeling</b></a><a class="navbar__item navbar__link navbar__link--active" href="/datadeling-docs-tmp/docs/intro">Dokumentasjon</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/datadeling-docs-tmp/docs/intro">Test av dokumentasjonen til prosjekt Datadeling</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">datadeling</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling">IntArk</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">begreper</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">erfaringer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/faq">SpÃ¸rsmÃ¥l og svar</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">god-praksis</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">api-design</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/bruk-av-webservice">Webservice â€“ hva og hvordan</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">datakvalitet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/god-praksis">God praksis</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">informasjonsforvaltning</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">integrasjonsmonster</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">notifikasjonsdesign</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/kode">Kode som bruker IntArk</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">kurs</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">malgrupper</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">om</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/prinsippene">Prinsippene for IntArk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/styringsregler">Styringsreglene til IntArk</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">teknisk-plattform</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/unntak">UnntakshÃ¥ndtering i IntArk</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">veiledere</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Webservice â€“ hva og hvordan</h1></header><p>UiOs nye integrasjonsarkitektur er basert pÃ¥ teknologi kaltÂ <strong>Webservice</strong>. Dette dokumentet forklarer grunnen for dette teknologivalget, hvordan Webservice (WS) passer inn i arkitekturen og gir retningslinjer for hvordan man best realiserer en WS for sin tjeneste.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hva-er-en-webservicews"></a>Hva er en Webservice(WS)?<a class="hash-link" href="#hva-er-en-webservicews" title="Direct link to heading">#</a></h2><p>En <strong>Webservice</strong> (<strong>WS</strong>) er en del av en tjeneste eller system som tilbyr lese- og/eller skrivetilgang til tjenesten eller systemet vha. webbasert teknologi. En WS kan vÃ¦re en integrert del av tjenesten (heretter vil &quot;tjeneste&quot; dekke bÃ¥de system og tjeneste), en modul til tjenesten eller en lÃ¸srevet komponent som har et eget livslÃ¸p. Felles for alle variasjoner er at de gir etÂ standardisert grensesnitt til Ã¥ lese og/eller skrive data som ligger i tjenesten.Â </p><p>En WS tilbyr ett eller flereÂ <a href="https://en.wikipedia.org/wiki/Application_programming_interface" target="_blank" rel="noopener noreferrer">API-er</a>Â som tilbyrÂ funksjoner opp mot tjenesten. Funksjonene kan vÃ¦re nÃ¦rmest hva som helst, men som regel er de av typen &quot;hent data fra kilden&quot;.Â </p><p><img src="/datadeling-docs-tmp/assets/images/ws-forklart-cf592fdf5080d788babbbc4fed9e21a9.png">
<em>Konsumenter spÃ¸r kildens WS om data. Flere konsumenter benytter den samme WS-en da WS-ens API tilbyr funksjonalitet som dekker alle konsumentenes behov.</em></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hva-er-hensikten"></a>Hva er hensikten?<a class="hash-link" href="#hva-er-hensikten" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dagens-situasjon"></a>Dagens situasjon<a class="hash-link" href="#dagens-situasjon" title="Direct link to heading">#</a></h3><p>Hensikten med Ã¥ gÃ¥ over pÃ¥ en WS-basert integrasjonsarkitektur er primÃ¦rt Ã¥ kvitte seg med flaskehalser i organisasjonen, samt forhindre dobbeltarbeid. Mange av UiOs integrasjoner er basert pÃ¥ en sÃ¥kalt &quot;hub&amp;spoke&quot;-modell der datakilden er ansvarlig for Ã¥ levere fra segÂ de data som en konsument trenger. Ã…rsakene til at dette har blitt en sÃ¥ vanlig modell for integrasjon er mange, der de viktigste er:</p><ul><li>sikkerhet - kun de ansvarlige for kilden skal fÃ¥ tilgang til dataene i kilden</li><li>kompleksitet - kun de ansvarlige for kilden forstÃ¥r datamodellen i kilden</li><li>sentralisering - som en fÃ¸lge av sentralisering av data sÃ¥ blir integrasjonene ogsÃ¥ sentraliserte</li><li>tradisjon - slik at man &quot;alltid&quot; gjort integrasjon</li></ul><p><img src="/datadeling-docs-tmp/assets/images/hub-forklart-52d262e871601624628043e2b051502d.png">
Kilden er ansvarlig for Ã¥ gi konsumentene data. Ofte gjÃ¸res dette ved at komponenter i kilden genererer filer som sendes til konsumenten<em>.</em></p><p>Det er store utfordringer knyttet til en slik &quot;hub&amp;spoke&quot;-modell. Sentralisering av data er et veldig fornuftig valg for Ã¥ bekjempe dÃ¥rlig datakvalitet og sikre en autoritativ kilde som konsumenter kan forholde seg til. Sentralisering av integrasjonene nyter ikke de samme godene:</p><ul><li>De tekniske ressursene tilknyttet kilden blir bundet opp i enkeltprosjekter, andre prosjekter mÃ¥ vente.</li><li>En endring ute i en konsument medfÃ¸rer at ressurser mÃ¥ endre pÃ¥ kilden.</li><li>Kilden mÃ¥ alltid ha mangeÂ tekniske ressurser tilknyttet for Ã¥ klare arbeidsmengden.</li><li>Prosjekter fÃ¥r store skjulte kostnader fordi ressurser i kilden mÃ¥ gjÃ¸re integrasjonen.</li><li>Prosjekter blir forsinket da det sjelden er nok tekniske ressurser tilknyttet kilden og ingen andre enn disse ressursene kan gjÃ¸re integrasjonen.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="en-ws-basert-modell"></a>En WS-basert modell<a class="hash-link" href="#en-ws-basert-modell" title="Direct link to heading">#</a></h3><p>To av problemene som har medfÃ¸rt at &quot;hub&amp;spoke&quot;-modellen har blitt sÃ¥ utbredt er sikkerhet og kompleksitet. Uten grensesnitt som adresserer disse problemene sÃ¥ vil det vÃ¦re vanskelig Ã¥ gjÃ¸re en omfattende endring i hvordan UiO gjÃ¸r integrasjon. Sikkerhetsproblemet bestÃ¥r i hovedsak at systemeiere ikke vil tillate andre tilganger rett i databaser eller til API-er inne i tjenesten. Det er lite eller ingen tilgangskontroll sÃ¥ skal noen ha tilgang til noe sÃ¥ fÃ¥r de det til alt - gjerne ogsÃ¥ muligheten til Ã¥ endre data.Â </p><p>Kompleksitetsproblemene er ofte at internt i en tjeneste sÃ¥ er data strukturert pÃ¥ en slik mÃ¥te at de gir mening for systemeiere og ressurser tilknyttet tjenesten, men ikke utenforstÃ¥ende. SÃ¥ selv om man gir tilgang til en kilde sÃ¥ betyr ikke det at konsumenten skjÃ¸nner hva kilden tilbyr eller fÃ¥r gale data.</p><p>Dette kan lÃ¸ses som en del av WS-modellen:</p><p><img src="/datadeling-docs-tmp/assets/images/ws-api-26664470ed7580077a1124c6c649b42d.png">
Kilden tilby et API som forenkler de interne datastrukturene til noe forstÃ¥elig og funksjonelt for utenforstÃ¥ende. Konsumentene fÃ¥r kun tilgang til de funksjonene som avtales pÃ¥ forhÃ¥nd.</p><p>Hvordan API-et utformes i WS-en vil adressere kompleksitetsproblemene som nevnt. Hvis konsumenter trenger Ã¥ finne alle kontoer pÃ¥ UiO sÃ¥ kan API-et tilby en vasket liste der alle aktive konti som oppfyller kravene vises. Interne data, som ikke er interessante for andre enn systemeier, vises ikke.Â </p><p>Systemeier for kilden og de tekniske ressursene tilknyttet kilden vil vÃ¦re ansvarlige for Ã¥ tilby et API som gir konsumenter de data som konsumentene trenger. I oppstart av WS-basert integrasjon vil kostnaden knyttet til integrasjon vÃ¦re likt med tidligere mÃ¥ter Ã¥ integrere pÃ¥. Det er nÃ¥r WS-en allerede tilbyr et rikt API at systemeier vil se gevinsten i mindre behov for Ã¥ bruke ressurser pÃ¥ integrasjon â€“ prosjektene vil selv kunne skaffe data gjennom WS-en. Prosjektene kan budsjettere med tid og ressurser for integrasjon uten at kilden er en flaskehals.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="api-manager"></a>API manager<a class="hash-link" href="#api-manager" title="Direct link to heading">#</a></h3><p>En API manager, ogsÃ¥ kalt API gateway, er en tjeneste for Ã¥ kontrollere og styre tilganger til API-er. Tjenesten sikrer at konsumenter er de de utgir seg for Ã¥ vÃ¦re (autentisering) og holder rede pÃ¥ de tilganger konsumentene skal ha (autorisasjon).</p><p><img src="/datadeling-docs-tmp/assets/images/api-tilgang-835639dd5dd1efdbfe267a8ed5868bb2.png">
Kildens WS tilbyr en rekke datauttrekk i form av et API. API manager er tjenesten som tilgangsstyrer uttrekkene slik at konsumentene kun har tilgang til avtalte deler av API-et.</p><p>Ved Ã¥ sentralisere tilgangsstyringen av API-er sÃ¥ hÃ¸ster vi en rekke fordeler:</p><ul><li>Ett sentralt punkt for tilgangsstyring<ul><li>bestilling av flere tilganger i flere API-er kun ett sted</li><li>forvaltning av tilganger i flere kilder kun ett sted</li></ul></li><li>Sentral oversikt over dataflyt<ul><li>bedre sikkerhet</li><li>oversikt over hele virksomheten</li></ul></li><li>Ett punkt for integrasjon<ul><li>konsumenter mÃ¥ ikke lete etter ulike API-er</li><li>konsumenter kan integrere en gang, ulike kilder gir tilgang</li></ul></li></ul><p><img src="/datadeling-docs-tmp/assets/images/api-tilgang2-63ec649013a570f748f2341e0c1b95e3.png">
Eksempel pÃ¥ en konsument som trenger data fra flere kilder. Konsumenten forholder seg kun til API manager. Mellom kildene og API manager forvalter systemeierne de faktiske tilgangene.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="meldingskÃ¸-mq"></a>MeldingskÃ¸ (MQ)<a class="hash-link" href="#meldingskÃ¸-mq" title="Direct link to heading">#</a></h3><p>En meldingskÃ¸ (MQ) er en tjeneste som gir kilderÂ mulighet til Ã¥ sende beskjed om at data er endret. I gamle hub &amp; spoke-integrasjoner baserer man seg i stor grad pÃ¥ fulldumper â€“ altsÃ¥ filer med alle data en konsument trenger. Dette er kostbart, sÃ¥rbart og tregt. Med en meldingskÃ¸ er tanken at en kilde sender ut en notifikasjon nÃ¥r data har endret seg, som er av interesse for konsumenter. Notifikasjonen er ikke nÃ¸dvendigvis informasjonsbÃ¦rende nok til at konsumenten kan foreta en endring, men forteller konsumenten at den mÃ¥ hente data pÃ¥ nytt for Ã¥ sjekke egne data mot den autoritative kilden. Dette gjÃ¸res med en URL til den berÃ¸rte enheten.</p><p><img src="/datadeling-docs-tmp/assets/images/mq-flyt-d61a42ce065ae6cd07265e1b786e6561.png">
Notifikasjoner sendes fra kildene inn til meldingskÃ¸en. Konsumentene velger selv hvilke notifikasjoner de Ã¸nsker Ã¥ abonnere pÃ¥. Konsumenten nede til hÃ¸yre abonnerer pÃ¥ notifikasjoner fra alle tre kildene i eksemplet.</p><p>Notifikasjoner skalÂ ikke inneholde utfyllende informasjon fordi man Ã¸nsker liberale regler rundt abonnement pÃ¥ notifikasjoner. Flyter fÃ¸dselsnummer eller sensitiv informasjon i notifikasjoner sÃ¥ mÃ¥ tilgangskontrollen pÃ¥ notifikasjoner vÃ¦re strengt regulert. Er notifikasjonene kun en indikator pÃ¥ at noe har skjedd med en enhet sÃ¥ vil tilgangskontrollen kunne gjÃ¸res ene og alene mot WS-en.</p><p>MQ, som beskrevet i arkitekturen og i dette dokumentet, er en sentral tjeneste. Andre meldingskÃ¸er kan eksistere i virksomheten uten at de faller inn under arkitekturen. Sammenhengen mellom API manager, WS og MQ forklares lenger ned i dokumentet.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hvem-mÃ¥-ha-en-ws"></a>Hvem mÃ¥ haÂ en WS?<a class="hash-link" href="#hvem-mÃ¥-ha-en-ws" title="Direct link to heading">#</a></h2><p>Det er ikke slik at alle tjenester mÃ¥ ha en WS i den nye integrasjonsarkitekturen. Kravet om WS inntreffer hovedsaklig nÃ¥r en kilde sitter pÃ¥ data som andre tjenester vil lese og eller skrive. Har kilden svÃ¦rt fÃ¥ integrasjoner og dette ikke vil Ã¸ke i fremtiden sÃ¥ vil integrasjonsarkitekturprinsippene heller ikke kreve en WS foran kilden. Det gir for lite avkastning pÃ¥ investeringen.</p><p>WS vil vÃ¦re enten pÃ¥krev eller svÃ¦rt nyttig der tjenesten er en autoritativ kilde for data som andre trenger innsyn i, eller der tjenesten fungerer som en del av en annen tjeneste.Â </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="autoritativ-kilde"></a>Autoritativ kilde<a class="hash-link" href="#autoritativ-kilde" title="Direct link to heading">#</a></h3><p>Mange av integrasjonene pÃ¥ UiO kommer av atÂ tjenesterÂ trenger noe data fra en autoritativ kilde. Eksempler er lister av alle personer, kontiÂ eller grupper. Hva disse dataene brukes til videre er forskjellig, men likhetstrekkene for selve integrasjonen er sÃ¥ markant at man fÃ¥r store fordeler av Ã¥ modernisere og standardisere prosessen.</p><p><img src="/datadeling-docs-tmp/assets/images/ws-mq-sirkel-4bd045e962bb27a031ce3cb8a351aca0.png">
Kilden sender en notifikasjon til en meldingskÃ¸(MQ) som videresender denne til konsumenter som abonnerer pÃ¥ denne typen notifikasjoner. Notifikasjonen sier at konsumenten mÃ¥ hente data om en entitet for Ã¥ se om endringen skal reflekteres i konsumenten.</p><p>En tenkt flyt i modellen over er:</p><ol><li>Kilde sender notifikasjon med innhold &quot;person 123 er endret&quot; til MQ som fÃ¸lge av at et telefonnummer er endret.</li><li>MQ videresender notifikasjonen til de konsumenter som abonnerer pÃ¥ denne typen notifikasjoner fra kilden.</li><li>Konsumenten fÃ¥r beskjed om at person 123 har en ukjent endring.</li><li>Konsumenten kontakter API manager, som styrer tilgangen til WS-en til kilden, for Ã¥ spÃ¸rre om personobjektet 123.</li><li>Alle kall til API manager, og som er forhÃ¥ndsgodkjent, videresendes til WS-en.</li><li>WS-en returnerer personobjektet 123, med det oppdaterte telefonnummeret.</li><li>Konsumenten sammenligner nye og gamle data og oppdaterer telefonnummeret.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="datalager"></a>Datalager<a class="hash-link" href="#datalager" title="Direct link to heading">#</a></h3><p>Integrasjoner er ikke alltid det Ã¥ flytte data fra A til B, altsÃ¥ replisering av data. Sammensatte tjenester der man utnytter en tjenesteorientert arkitektur vil kunne bygge pÃ¥ andre tjenester. Et eksempel pÃ¥ dette kan vÃ¦re at en tjeneste velger Ã¥ integrere med en kilde med den hensikt Ã¥ benytte kilden som en del av sitt datalager. Tjenesten kunne integrert som over og replisert data om f.eks. personer, grupper eller kalenderdata, men man kan ogsÃ¥ gÃ¥ direkte til kilden (bokstavelig talt) og jobbe direkte pÃ¥ kildedataene.</p><p><img src="/datadeling-docs-tmp/assets/images/datalager-7a148c7f255482d72e1b8b8a14c37025.png">
En tjeneste, bestÃ¥ende av et brukergrensesnitt, et logisk lag og en database, benytter en ekstern kilde som en del av sitt datalag.</p><p>I et slikt scenario sÃ¥ kan det vÃ¦re krav til WS-en i kilden om Ã¥ tilby skrivemuligheter. Man kan se for seg at personpresentasjonen pÃ¥ UiOs nettsider vil vÃ¦re redigerbare for personer som er innlogget og disse dataene bÃ¥de hentes fra UiOs HR-system, samt blir skrevet tilbake hvis personen redigerer dem i presentasjonssidene. Dette gir strengere krav til oppetid og skalerbarhet i kilden og dens WS, men gevinsten er at selve tjenesten blir mindre og mindre kostbar â€“ man oppdaterer kildedata direkte uten mellomlagring og ekstra kompleksitet dette medfÃ¸rer.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hvordan-skal-et-api-i-en-ws-se-ut"></a>Hvordan skalÂ et API i en WS se ut?<a class="hash-link" href="#hvordan-skal-et-api-i-en-ws-se-ut" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="restful"></a>RESTful<a class="hash-link" href="#restful" title="Direct link to heading">#</a></h3><p><a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener noreferrer">REST</a>Â er en metodikk for Ã¥ sikre lÃ¸se koblinger mellom to tjenester i en integrasjon. Begrepet misbrukes ofte om integrasjoner som benytter HTTP som den underliggende protokollen for integrasjonen, men REST er ikke begrenset til HTTP og mÃ¥ ikke bygges over HTTP. For Ã¥ sikre at man ikke viderefÃ¸rer gamle, tett koblede integrasjoner i den nye integrasjonsarkitekturen, bÃ¸r tjenesteeiere og -utviklere etterstrebe Ã¥ lage grensesnitt som er sÃ¥ RESTfulsom mulig.</p><p>SÃ¥ hva er RESTful? Det kan deles inn i fire nivÃ¥er, der det er opp til tjenesteeierÂ og -utvikler Ã¥ bestemme hvor RESTful API-et skal vÃ¦re. Anbefalt minimumsnivÃ¥ er nivÃ¥ 2.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nivÃ¥-0-rpc-over-http"></a>NivÃ¥ 0: RPC over HTTP<a class="hash-link" href="#nivÃ¥-0-rpc-over-http" title="Direct link to heading">#</a></h4><p>PÃ¥ dette nivÃ¥et ligger REST API-er som ikke egentlig er REST. Man har implementert typiske <a href="https://en.wikipedia.org/wiki/Remote_procedure_call" target="_blank" rel="noopener noreferrer">RPC</a>-kall over HTTP og kaller dette REST. Det resulterende API-et blir spesialisert og lite gjenbrukbart. Typisk forsÃ¸ker man Ã¥ tilby funksjonalitet i API-et tatt helt bokstavlig fra en bestilling. Ã˜nsker konsument en Ã¥ hente fornavn pÃ¥ en person sÃ¥ lager man en funksjon for dette. Konsument to Ã¸nsker hele navnet sÃ¥ da lager man en ny funksjon. Konsument tre Ã¸nsker en liste med alle navnetyper, samt muligheten til Ã¥ oppdatere navn sÃ¥ da lages det flere funksjoner for alt dette. Man ender opp med tette koblinger og lite til ingen gjenbruk.Â </p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nivÃ¥-1-ressurser"></a>NivÃ¥ 1: Ressurser<a class="hash-link" href="#nivÃ¥-1-ressurser" title="Direct link to heading">#</a></h4><p>PÃ¥ nivÃ¥ 1 begynner man Ã¥ omfavne RESTful. Isteden for spesialiserte kall for enhver handling som omhandler en ressurs eller entitet sÃ¥ samler man disse i en felles ressurs. I eksemplet med navn pÃ¥ en person fra nivÃ¥ 0 sÃ¥ samler man navn under <strong>persons/mathiasm/names*</strong>.*Under dette omrÃ¥det samler man de funksjoner som omhandler navn. Dette er en bedre lÃ¸sning enn i nivÃ¥ 0, men fortsatt utsatt for spesialiserte funksjoner og manglende gjenbruk. Det oppfordrer dog til en ressursdrevet (datadrevet) modell der ressurser i form av data bestemmer mer av strukturen pÃ¥ API-et heller enn en mer tilfeldig modell basert pÃ¥ hvem som spurte om hva nÃ¥r.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nivÃ¥-2-http-verb"></a>NivÃ¥ 2: HTTP verb<a class="hash-link" href="#nivÃ¥-2-http-verb" title="Direct link to heading">#</a></h4><p>PÃ¥ dette nivÃ¥et har API-et modnet betraktelig. Om man implementerer et nivÃ¥ 2 API sÃ¥ er ikke API-et fullt ut RESTful, men det er likevel av en slik kvalitet at det oppfyller kravene fra integrasjonsarkitekturen. Det vil vÃ¦re modulÃ¦rt, datadrevet og gjenbrukbart. SomÂ de tidligere eksemplene med personnavn sÃ¥ vil HTTP-verbet bestemme operasjonen man gjÃ¸r pÃ¥ navn.Â <strong>GET persons/mathiasm/names</strong> vil gi en liste URL-er med de navn som er registrert for personen &#x27;mathiasm&#x27;. GET pÃ¥ en av disse vil gi denne typen navn. En endring eller sletting gjÃ¸res med HTTP-verbene DELETE, POSTÂ eller PUT. Behovet for spesialiserte funksjoner blir minimalt da dataene selv representeres som ressurser og man kan lese og skrive til disse ressursene.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nivÃ¥-3-hypermedia-controlshateoas"></a>NivÃ¥ 3:Â Hypermedia Controls/HATEOAS<a class="hash-link" href="#nivÃ¥-3-hypermedia-controlshateoas" title="Direct link to heading">#</a></h4><p>For et ekte RESTful API sÃ¥ skal API-et i WS-en vÃ¦re den kontrollerende aktÃ¸ren i integrasjonen. Dette vil si at i eksemplet med navn sÃ¥ vil utseendet pÃ¥ API-et endre seg i forhold til kontekst. For konsument 1, som kun skal hente fornavn pÃ¥ personer, sÃ¥ viser API-et kun dette. For konsument 3, som Ã¸nsker alle navnetyper, samt mulighet til Ã¥ oppdatere navn, sÃ¥ vil kallet som returnerer listen ogsÃ¥ inkludere lenker til hvordan konsumenten kan oppdatere navn. For de navn som ikke finnes vil det bli sendt med lenker til hvor konsumenten kan opprette disse navnene. API-et gir fra seg informasjon om tilstanden pÃ¥ data og tilgangene konsumenten har til data. Dette gir navn til det velklingende akronymetÂ <strong>HATEOAS</strong> (Hypertext As The Engine Of Application State).Â </p><p>Ã… implementere etÂ ekte RESTful API er ressurskrevende. Det er uklart om steget fra nivÃ¥ 2 til 3 er verdt den ekstra innsatsen.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="entitetsbasert-api"></a>Entitetsbasert API<a class="hash-link" href="#entitetsbasert-api" title="Direct link to heading">#</a></h3><p>Entitet- eller ressursbasert, som nevnt under nivÃ¥ 1 under RESTful, handler om Ã¥ bevege seg bort fra <strong>operasjonen</strong>Â man skal gjÃ¸re og heller se pÃ¥Â <strong>data</strong>Â man skal gjÃ¸re noe med. Mange uttrekk og funksjoner i dag erÂ resultatet av at man skal gjÃ¸re noe bestemt. Konsumenter trenger sammensatte uttrekk fra konsumenter og skal ikke ha for mye eller for lite data. Dataene skal formateres pÃ¥ bestemte mÃ¥ter og svÃ¦rt sjeldent kan to ulike konsumenter benytte de samme uttrekkene.</p><p>Ã… si at API-er skal vÃ¦re entitetsbaserte (evt. ressursbaserte) vil si at man heller eksponerer typiske entiteter fra kilden heller enn ferdige uttrekk. Om en konsument trenger informasjon om ansatte og deres organisasjonstilhÃ¸righet sÃ¥ kan dette realiseres med entiteteneÂ <em>employees</em>ogÂ <em>organisational units</em>. Relasjonen mellom den ansatte og organisasjon realiseres som attributter i en eller begge entiteter. Det er opp til eiere, forvaltere og utviklere for en kilde om hva som er en entitet eller ressurs. Eksempelvis kan man si at en brukerkonto er en entitet, mens et brukernavn kun er et attributt ved denne brukerkontoen. En gruppe er en entitet, mens gruppenavnet og medlemskap er attributter til gruppen.</p><p>Slike kolleksjoner av entiteter eller ressurser vil ikke gi den skreddersÃ¸mmen som vi til vanlig har tilbudt. Det er nÃ¥ opp til konsumenten Ã¥ selv filtrere og slÃ¥ sammen data, men kilden tilbyr nÃ¥ verktÃ¸yene for at konsumenter kan fÃ¥ data.Â </p><p>For funksjoner som aldri kan vÃ¦re datadrevne â€“Â  som start/stopp-funksjonalitet â€“ er det opp til tjenesteeier for hvordan man realiserer dette.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="funksjonelt-api"></a>Funksjonelt API<a class="hash-link" href="#funksjonelt-api" title="Direct link to heading">#</a></h3><p>Et funksjonelt API, til forskjell fra <a href="https://en.wikipedia.org/wiki/Functional_programming" target="_blank" rel="noopener noreferrer">funksjonell programmering</a>, omhandler at designet av API-et skal vÃ¦re forstÃ¥elig og brukbartÂ for utenforstÃ¥ende. Utviklere av konsumenter sitter ikke med den domenekunnskapen som de som jobber med en kilde gjÃ¸r. Dette betyr at API-er inn mot kilder bÃ¸r forenkles slik at de gir mening for utenforstÃ¥ende, men ikke mer enn at informasjon som er nÃ¸dvendig for konsumenter gÃ¥r tapt.</p><p>Et eksempel kan vÃ¦re den aktive studentmassen pÃ¥ UiO. Ulike konsumenter kan vÃ¦re interessert i ulike mengder studenter slik at API-et mÃ¥ gi et rikt utplukk studenter, men konsumentene vet ikke reglene som omhandler betalt semesteravgift, oppmeldt studieprogram eller enkeltemne, samt andre regler som bestemmer om studenter regnes som &quot;aktive&quot; studenter. API-et kunne realiseres som enten Ã¥ ha et attributt som sier &quot;aktiv&quot; pÃ¥ ressursen student, eller eksponere alle tilhÃ¸rende databasestrukturerÂ som avgjÃ¸r om studenten er aktiv i andre enden av skalaen. Sannsynligvis ligger den beste lÃ¸sningen et sted i midten, der man bÃ¸r eksponere mye av de tilhÃ¸rende data, men pÃ¥ en slik mÃ¥te at konsumenten kan forstÃ¥ informasjonen heller enn Ã¥ lÃ¦re seg de interne strukturene i kilden.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/jokim/datadelingsdokumentasjon/tree/master/docs/datadeling/god-praksis/bruk-av-webservice.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/api-design"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« API-design</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/datadeling-docs-tmp/docs/datadeling/god-praksis/datakvalitet/datasett"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Beskrivelser av datasett i IntArk Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#hva-er-en-webservicews" class="table-of-contents__link">Hva er en Webservice(WS)?</a></li><li><a href="#hva-er-hensikten" class="table-of-contents__link">Hva er hensikten?</a><ul><li><a href="#dagens-situasjon" class="table-of-contents__link">Dagens situasjon</a></li><li><a href="#en-ws-basert-modell" class="table-of-contents__link">En WS-basert modell</a></li><li><a href="#api-manager" class="table-of-contents__link">API manager</a></li><li><a href="#meldingskÃ¸-mq" class="table-of-contents__link">MeldingskÃ¸ (MQ)</a></li></ul></li><li><a href="#hvem-mÃ¥-ha-en-ws" class="table-of-contents__link">Hvem mÃ¥ haÂ en WS?</a><ul><li><a href="#autoritativ-kilde" class="table-of-contents__link">Autoritativ kilde</a></li><li><a href="#datalager" class="table-of-contents__link">Datalager</a></li></ul></li><li><a href="#hvordan-skal-et-api-i-en-ws-se-ut" class="table-of-contents__link">Hvordan skalÂ et API i en WS se ut?</a><ul><li><a href="#restful" class="table-of-contents__link">RESTful</a></li><li><a href="#entitetsbasert-api" class="table-of-contents__link">Entitetsbasert API</a></li><li><a href="#funksjonelt-api" class="table-of-contents__link">Funksjonelt API</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 HK-dir, Unit, Uninett AS</div></div></div></footer></div>
<script src="/datadeling-docs-tmp/assets/js/runtime~main.55f61790.js"></script>
<script src="/datadeling-docs-tmp/assets/js/main.7b16ab79.js"></script>
</body>
</html>