<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<title data-react-helmet="true">Filtrere bort innhold i responsen fra et API | Datadeling Test</title><meta data-react-helmet="true" property="og:url" content="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/filtrere-innhold-json"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Filtrere bort innhold i responsen fra et API | Datadeling Test"><meta data-react-helmet="true" name="description" content="Om responsen fra et API inneholder informasjon som er beskyttelsesverdig og som ikke alle konsumenter trenger kan man legge på en enkel policy som fjerner felt fra responsen.


Om der er et eget-utviklet API er det bedre å endre i APIet. Og selv om man ikke kan endre på et API: er det  behov for større endringer i responsen til et API er det oftest bedre å gjøre dette utenfor API manageren, feks. ved å ha en liten mikrotjeneste mellom API manager og backend-APIet.


Men mindre endringer, f.eks. for å fjerne enkelte felt, er policy-en  JSON to JSON transformation en rask og enkel måte å filtere bort innhold man vil beskytte"><meta data-react-helmet="true" property="og:description" content="Om responsen fra et API inneholder informasjon som er beskyttelsesverdig og som ikke alle konsumenter trenger kan man legge på en enkel policy som fjerner felt fra responsen.


Om der er et eget-utviklet API er det bedre å endre i APIet. Og selv om man ikke kan endre på et API: er det  behov for større endringer i responsen til et API er det oftest bedre å gjøre dette utenfor API manageren, feks. ved å ha en liten mikrotjeneste mellom API manager og backend-APIet.


Men mindre endringer, f.eks. for å fjerne enkelte felt, er policy-en  JSON to JSON transformation en rask og enkel måte å filtere bort innhold man vil beskytte"><link data-react-helmet="true" rel="shortcut icon" href="/datadeling-docs-tmp/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/filtrere-innhold-json"><link data-react-helmet="true" rel="alternate" href="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/filtrere-innhold-json" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://jokim.github.io//datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/filtrere-innhold-json" hreflang="x-default"><link rel="stylesheet" href="/datadeling-docs-tmp/assets/css/styles.b121cd8c.css">
<link rel="preload" href="/datadeling-docs-tmp/assets/js/runtime~main.aa1a0d81.js" as="script">
<link rel="preload" href="/datadeling-docs-tmp/assets/js/main.9016a72a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/datadeling-docs-tmp/"><img src="/datadeling-docs-tmp/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/datadeling-docs-tmp/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Datadeling</b></a><a class="navbar__item navbar__link navbar__link--active" href="/datadeling-docs-tmp/docs/intro">Dokumentasjon</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/datadeling-docs-tmp/docs/intro">Test av dokumentasjonen til prosjekt Datadeling</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">datadeling</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling">IntArk</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">begreper</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">erfaringer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/faq">Spørsmål og svar</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">god-praksis</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/kode">Kode som bruker IntArk</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">kurs</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">malgrupper</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">om</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/prinsippene">Prinsippene for IntArk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/styringsregler">Styringsreglene til IntArk</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">teknisk-plattform</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/unntak">Unntakshåndtering i IntArk</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">veiledere</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">annet</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">api-manager</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/api-manager-be-om-tilgang">Få tilgang til et API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/api-manager-registrere-enkelt-api">Registrere et enkelt API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/api-tilganger">Forvaltning av tilganger til API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/backend">Konfigurere backend</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/caching-gravitee">Caching i gravitee</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/filtrere-innhold-json">Filtrere bort innhold i responsen fra et API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/godkjenne-tilgang-til-api">Godkjenne tilgang til API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/importer-api">Importer API-oppsett fra fil</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/jwt-mot-backend">Backend-autentisering med JWTs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/legge-pa-enkel-policy">Legge på en enkel policy (IP filter)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/maskinporten-autentisering">Konfigurere autentisering via maskinporten </a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/opprette-plan">Opprette plan</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/rettigheter-og-roller-i-api-manager">Rettigheter, roller og grupper i API Manager</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/rolle-internrevisjon">Egne roller i Gravitee (f.eks. for innsyn)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/se-bruk-av-api">Se bruken av ditt API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/varsling-for-api-eiere">Varsling av nye subscriptions o.l.</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere">Veiledere i IntArk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/innforing">Kom i gang med IntArk</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">meldingskø</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/datadeling-docs-tmp/docs/datadeling/veiledere/sjekkliste-innforing">Sjekkliste for innføring av IntArk</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Filtrere bort innhold i responsen fra et API</h1></header><p>Om responsen fra et API inneholder informasjon som er beskyttelsesverdig og som ikke alle konsumenter trenger kan man legge på en enkel policy som fjerner felt fra responsen.</p><p>Om det er et eget-utviklet API er det bedre å endre i selve API-et. Og selv om man ikke kan endre på et API: er det behov for større endringer i responsen til et API er det bedre å gjøre dette utenfor API manageren, feks. ved å ha en liten mikrotjeneste mellom API manager og backend-API-et.</p><p>Med mindre endringer, f.eks. for å fjerne enkelte felt, egner policyen JSON to JSON transformation seg godt. Dette er en rask og enkel måte å filtere bort innhold man vil beskytte.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="introduksjon"></a>Introduksjon<a class="hash-link" href="#introduksjon" title="Direct link to heading">#</a></h2><p>Her konfigureres policyen JSON to JSON transformation. Hvis filtreringen skal gjelde alle som benytter APIet, <a href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/legge-pa-enkel-policy">legg på policy som beskrevet her.</a></p><p>Om filtreringen skal gjelde en enkel plan, slik at man kan ha en plan som gir all informasjon i svaret og en annen plan som kun gir åpen informasjon i svar, legg til policyen på siste side i veiviseren, punkt 4 &quot;Policies&quot;, for å opprette/endre plan.</p><p>I nedtrekksmenyen hvor det står &quot;Select policy&quot;, velg JSON to JSON transformation og trykk &quot;ADD&quot;.</p><p><img alt="Legge policy på plan i gravitee" src="/datadeling-docs-tmp/assets/images/image-20210126164247-1-48c560105fdefac59e243e2f5fef8fd9.png">  </p><p><img alt="json to json policy" src="/datadeling-docs-tmp/assets/images/image-20210126175724-2-16f06cdebfd5a9918c6566f76271318b.png"></p><p>For Scope, velg &quot;RESPONSE&quot;.</p><p>I feltet for JOLT spesification spesifiserer du hva som skal endres i JSON filen.</p><p>Denne policyen benytter <a href="https://github.com/bazaarvoice/jolt" target="_blank" rel="noopener noreferrer">open source-prosjektet JOLT</a></p><p>Dette kan <a href="http://jolt-demo.appspot.com" target="_blank" rel="noopener noreferrer">testes på denne web-siden</a> om det er ønskelig.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="eksempel-1-respons-fra-et-api-med-ett-objekt"></a>Eksempel 1: Respons fra et API med ett objekt<a class="hash-link" href="#eksempel-1-respons-fra-et-api-med-ett-objekt" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ansatt&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;00102099&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;brukerident&quot;: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;dfoBrukerident&quot;: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;eksternIdent&quot;: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;fornavn&quot;: &quot;Kjell-Arne&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;etternavn&quot;: &quot;Testesen&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;fnr&quot;: &quot;29078729585&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;annenId&quot;: [</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      null</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;fdato&quot;: &quot;1987-07-29&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For å fjerne nøkkelel &quot;fnr&quot; og tilknyttet verdi konfigurer vi policyen slik:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;remove&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spec&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ansatt&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;fnr&quot;: &quot;&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Kaller man API-et etter at denne policyen er lagt på, får man i stedet denne responsen:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ansatt&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;00102099&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;brukerident&quot;: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;dfoBrukerident&quot;: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;eksternIdent&quot;: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;fornavn&quot;: &quot;Kjell-Arne&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;etternavn&quot;: &quot;Testesen&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;annenId&quot;: [</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      null</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;fdato&quot;: &quot;1987-07-29&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="eksempel-2-respons-fra-et-api-med-flere-objekt"></a>Eksempel 2: Respons fra et API med flere objekt<a class="hash-link" href="#eksempel-2-respons-fra-et-api-med-flere-objekt" title="Direct link to heading">#</a></h3><p>Mange API-er gir enkeltsvar tilbake som et enkelt objekt, men kall som finner flere objekter gir tilbake en liste med objekter:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ansatt&quot;: [</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;00102099&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;brukerident&quot;: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;dfoBrukerident&quot;: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;eksternIdent&quot;: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;fornavn&quot;: &quot;Kjell-Arne&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;etternavn&quot;: &quot;Testesen&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;annenId&quot;: [</span></span><span class="token-line" style="color:#393A34"><span class="token plain">         null</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      ],</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;fdato&quot;: &quot;1987-07-29&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;00100982&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;brukerident&quot;: null,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;fornavn&quot;: &quot;Martin&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;etternavn&quot;: &quot;Martinsen&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;fnr&quot;: &quot;23456789&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;fdato&quot;: &quot;1973-11-06&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For å filtrere bort &quot;fnr&quot; fra denne kan man benytte følgende spesifisering:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;remove&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spec&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ansatt&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;*&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;fnr&quot;: &quot;&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;fnr&quot;: &quot;&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Denne spesifiseringen vil fungere både på det første og andre eksemplet.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="eksempel-3-respons-fra-et-api-gitt-en-spesifikk-verdi"></a>Eksempel 3: respons fra et API gitt en spesifikk verdi<a class="hash-link" href="#eksempel-3-respons-fra-et-api-gitt-en-spesifikk-verdi" title="Direct link to heading">#</a></h3><p>Noen ganger vil man kun returnere svar ut i fra et API dersom det i svaret forekommer en spesifikk verdi. Gitt at API-et gir følgende respons:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;5001234&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;navn&quot;: &quot;Ola Nordmann&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;info&quot;: &quot;Informasjon som noen ganger er unntatt offentligheten&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;unntattOff&quot;: &quot;False&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Og vi vil returnere denne responsen, men kun dersom feltet &quot;unntattOff&quot; ikke har verdien &quot;True&quot;.</p><p>Følgende JOLT-spesifikasjon vil kun tillate svar der hvor verdien i &quot;unntattOff&quot; er &quot;False&quot;:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;shift&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spec&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;unntattOff&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;False&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;@2&quot;: &quot;&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Om responsen fra API-et er som følger:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;5001234&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;navn&quot;: &quot;Ola Nordmann&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;info&quot;: &quot;Dette er hemmelig&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;unntattOff&quot;: &quot;True&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Da vil svaret fra Gravitee med denne policyen på planen/API-et være:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">null</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Merk at slik som vi har konfigurert JOLT-spesifikasjonen så tar vi med svaret kun hvis &quot;unntattOff&quot; er &quot;False&quot;. Om det har verdien &quot;Nei&quot; eller er tomt vil det ikke bli tatt med. Det er også mulig å erstatte innholdet med en tom verdi om &quot;unntattOff&quot; er &quot;True&quot;, og returnere svar om det har en hvilken som helst annen verdi, eller ingen verdi, men da risikerer man å returnere svar som ikke skulle vært med om &quot;unntattOff&quot; ved en feil eller en kodeendring er tomt, får verdien &quot;Ja&quot; eller har endret stor/liten bokstav til TRUE eller true.</p><p>Merk at spesifikasjonen ikke vil returnere svar om nøkkelen &quot;unntattOff&quot; mangler helt.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="eksempel-4-svar-med-default-verdi"></a>Eksempel 4: Svar med default-verdi<a class="hash-link" href="#eksempel-4-svar-med-default-verdi" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;shift&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spec&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;unntattOff&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;true&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;&quot;: &quot;&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;*&quot;: { &quot;@2&quot;: &quot;&quot; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Om en nøkkel kun er med hvis den har en verdi vil ikke dette eksempelet returnere noe svar. Feks. om &quot;unntattOff&quot; kun er med i svaret om det har verdien &quot;true&quot; eller om det kun er med om noen eksplisitt har valgt &quot;true&quot; eller &quot;false&quot;. I disse tilfellene vil ingen av konfigurasjonene i dette eksempelet fungere. Det man kan gjøre i en slik situasjon er å sette en default-verdi først, og deretter shift-operasjonen:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;default&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spec&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;unntattOff&quot;: &quot;false&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;shift&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spec&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;unntattOff&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;true&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;&quot;: &quot;&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;*&quot;: { &quot;@2&quot;: &quot;&quot; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Merk at nøkkel/verdien som blir lagt til vil bli med i svaret som går til mottakeren.</p><p>Disse eksemplene vil, i likhet med eksempel 1, ikke fungere om man får svar med flere objekter i en liste. For slike tilfeller kan man heller bruke:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;shift&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spec&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;unntattOff&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;false&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;@2&quot;: &quot;&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;*&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;unntattOff&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;false&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;@2&quot;: &quot;&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For å sette inn default-verdier i et array må det spesifiseres at det er et array ved å legge på [] i slutten av navnet.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ressurser&quot;: </span></span><span class="token-line" style="color:#393A34"><span class="token plain"> [</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;id&quot;: &quot;5001234&quot;,  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;navn&quot;: &quot;Kari Nordmann&quot;,  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;info&quot;: &quot;Informasjon  er unntatt offentligheten&quot;,  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;unntattOff&quot;: &quot;True&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;id&quot;: &quot;5001235&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;navn&quot;: &quot;Ola Nordmann&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;info&quot;: &quot;Informasjon som ikke er unntatt offentligheten&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> ]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Bruk</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Text"><pre tabindex="0" class="prism-code language-Text codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;default&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spec&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ressurser[]&quot;:{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;*&quot;:{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;unntattOff&quot;: &quot;false&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operation&quot;: &quot;shift&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spec&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ressurser&quot;:{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;*&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;unntattOff&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;false&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;@2&quot;: &quot;ressurser&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/jokim/datadelingsdokumentasjon/tree/master/docs/datadeling/veiledere/api-manager/filtrere-innhold-json.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/caching-gravitee"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Caching i gravitee</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/godkjenne-tilgang-til-api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Godkjenne tilgang til API »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduksjon" class="table-of-contents__link">Introduksjon</a><ul><li><a href="#eksempel-1-respons-fra-et-api-med-ett-objekt" class="table-of-contents__link">Eksempel 1: Respons fra et API med ett objekt</a></li><li><a href="#eksempel-2-respons-fra-et-api-med-flere-objekt" class="table-of-contents__link">Eksempel 2: Respons fra et API med flere objekt</a></li><li><a href="#eksempel-3-respons-fra-et-api-gitt-en-spesifikk-verdi" class="table-of-contents__link">Eksempel 3: respons fra et API gitt en spesifikk verdi</a></li><li><a href="#eksempel-4-svar-med-default-verdi" class="table-of-contents__link">Eksempel 4: Svar med default-verdi</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 HK-dir, Unit, Uninett AS</div></div></div></footer></div>
<script src="/datadeling-docs-tmp/assets/js/runtime~main.aa1a0d81.js"></script>
<script src="/datadeling-docs-tmp/assets/js/main.9016a72a.js"></script>
</body>
</html>