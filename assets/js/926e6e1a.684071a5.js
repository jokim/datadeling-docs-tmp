"use strict";(self.webpackChunkdatadeling=self.webpackChunkdatadeling||[]).push([[7313],{3905:function(e,t,r){r.d(t,{Zo:function(){return g},kt:function(){return d}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=n.createContext({}),s=function(e){var t=n.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},g=function(e){var t=s(e.components);return n.createElement(o.Provider,{value:t},e.children)},k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,o=e.parentName,g=p(e,["components","mdxType","originalType","parentName"]),m=s(r),d=a,u=m["".concat(o,".").concat(d)]||m[d]||k[d]||l;return r?n.createElement(u,i(i({ref:t},g),{},{components:r})):n.createElement(u,i({ref:t},g))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,i=new Array(l);i[0]=m;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p.mdxType="string"==typeof e?e:a,i[1]=p;for(var s=2;s<l;s++)i[s]=r[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},3726:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return p},contentTitle:function(){return o},metadata:function(){return s},toc:function(){return g},default:function(){return m}});var n=r(7462),a=r(3366),l=(r(7294),r(3905)),i=["components"],p={description:"En plan kan sees p\xe5 som et sett med rettigheter til et API\n\n\nDet kan v\xe6re rettigheter for hvilke paths man har lov til \xe5 bruke, om man har bare lese-rettigheter eller b\xe5de lese og skrive-rettigheter eller hvor ofte du har lov til \xe5 sp\xf8rre mot APIet",title:"Opprette plan"},o="Opprette plan",s={unversionedId:"datadeling/veiledere/api-manager/opprette-plan",id:"datadeling/veiledere/api-manager/opprette-plan",isDocsHomePage:!1,title:"Opprette plan",description:"En plan kan sees p\xe5 som et sett med rettigheter til et API\n\n\nDet kan v\xe6re rettigheter for hvilke paths man har lov til \xe5 bruke, om man har bare lese-rettigheter eller b\xe5de lese og skrive-rettigheter eller hvor ofte du har lov til \xe5 sp\xf8rre mot APIet",source:"@site/docs/datadeling/veiledere/api-manager/opprette-plan.md",sourceDirName:"datadeling/veiledere/api-manager",slug:"/datadeling/veiledere/api-manager/opprette-plan",permalink:"/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/opprette-plan",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/datadeling/veiledere/api-manager/opprette-plan.md",version:"current",frontMatter:{description:"En plan kan sees p\xe5 som et sett med rettigheter til et API\n\n\nDet kan v\xe6re rettigheter for hvilke paths man har lov til \xe5 bruke, om man har bare lese-rettigheter eller b\xe5de lese og skrive-rettigheter eller hvor ofte du har lov til \xe5 sp\xf8rre mot APIet",title:"Opprette plan"},sidebar:"tutorialSidebar",previous:{title:"Konfigurere autentisering via maskinporten ",permalink:"/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/maskinporten-autentisering"},next:{title:"Rettigheter, roller og grupper i API Manager",permalink:"/datadeling-docs-tmp/docs/datadeling/veiledere/api-manager/rettigheter-og-roller-i-api-manager"}},g=[{value:"Opprette plan",id:"opprette-plan-1",children:[]},{value:"Opprette plan med mange rettigheter",id:"opprette-plan-med-mange-rettigheter",children:[]},{value:"Avslutte planer",id:"avslutte-planer",children:[]},{value:"Opprette plan med f\xe5 rettigheter og begrensning av bruk",id:"opprette-plan-med-f\xe5-rettigheter-og-begrensning-av-bruk",children:[]}],k={toc:g};function m(e){var t=e.components,p=(0,a.Z)(e,i);return(0,l.kt)("wrapper",(0,n.Z)({},k,p,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"opprette-plan"},"Opprette plan"),(0,l.kt)("p",null,"En plan kan sees p\xe5 som et sett med rettigheter til et API"),(0,l.kt)("p",null,"Det kan v\xe6re rettigheter for hvilke paths man har lov til \xe5 bruke, om man har bare lese-rettigheter eller b\xe5de lese og skrive-rettigheter eller hvor ofte du har lov til \xe5 sp\xf8rre mot APIet"),(0,l.kt)("p",null,"${resource:toc}"),(0,l.kt)("h3",{id:"opprette-plan-1"},"Opprette plan"),(0,l.kt)("p",null,"Under API definisjonen, G\xe5 til Poral og Plans. Lag ny plan ved \xe5 trykke p\xe5 det bl\xe5 +-tegnet"),(0,l.kt)("p",null,"Du blir s\xe5 tatt gjennom veiviseren for \xe5 opprette / endre en plan. I eksemplene under lager vi planer for ",(0,l.kt)("a",{parentName:"p",href:"https://petstore3.swagger.io/"},"test-APIet petstore")," "),(0,l.kt)("p",null,(0,l.kt)("img",{src:r(7043).Z})),(0,l.kt)("h3",{id:"opprette-plan-med-mange-rettigheter"},"Opprette plan med mange rettigheter"),(0,l.kt)("p",null,"P\xe5 f\xf8rste siden fyll inn navn og en beskrivelse."),(0,l.kt)("p",null,"Det er noen andre valg:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Auto validate subscription betyr at alle som ber om tilgang f\xe5r det automatisk (men i motsetning til en \xe5pen plan m\xe5 de registrere applikasjonen)."),(0,l.kt)("li",{parentName:"ul"},'Skru p\xe5 "Consumer must provide a comment" om du vil kreve at det blir skrevet en kommentar for \xe5 f\xe5 spurt om tilgang.'),(0,l.kt)("li",{parentName:"ul"},'I tekst-feltet "Custom messae to display to consumer"\xa0 er det mlig \xe5 legge inn en kort,egen tekst hvor man f.eks. ber om spesifikk informasjon.'),(0,l.kt)("li",{parentName:"ul"},'Under Characteristics kan man legge inn noen stikkord for \xe5 beskrive planen, f.eks. "\xe5pne data" om planen kun gir tilgang til det, "read only" om kun leserettigheter, "read/write" om planen gir tilgang til \xe5 legge inn datai APIet o.l.')),(0,l.kt)("p",null,(0,l.kt)("img",{src:r(1154).Z})),(0,l.kt)("p",null,"P\xe5 neste side velger man hvilken metode (om noen) APIet skal v\xe6re sikret med."),(0,l.kt)("p",null,"Man kan velge \xe5 ha det helt \xe5pent (public/keyless), bruke API-n\xf8kkel, JWT eller\xa0 OAuth 2."),(0,l.kt)("p",null,"I dette eksempelet brukes API n\xf8kkel. Man kan velge \xe5 sende API-n\xf8kkelen med videre til backend. (ikke valgt her, headeren med api-n\xf8kkel blir derfor ikke fjernet )"),(0,l.kt)("p",null,(0,l.kt)("img",{src:r(9396).Z})),(0,l.kt)("p",null,"I neste skjermbilde kan man velge \xe5 legge restriksjoner p\xe5 hva man f\xe5r lov til \xe5 gj\xf8re med denne planen. ",(0,l.kt)("a",{parentName:"p",href:"#restrictions"},"Se lenger ned for eksempler")),(0,l.kt)("p",null,"P\xe5 siste side kan man legge p\xe5 policy-er p\xe5 enkelt-planer. Det anbeflaes ikke om man kan unng\xe5 det. , men noen ganger er det n\xf8dvendig. Pr\xf8v i s\xe5 fall \xe5 ha s\xe5 f\xe5 som mulig her. Det er bare \xe5 velge policy, klikke p\xe5 add og konfigurere denne. Om man legger p\xe5 flere blir den neste lagt til p\xe5 slutten. Man kan ikke endre rekkef\xf8lge i etterkant slik som n\xe5r man endrer p\xe5 policyer for hele APIet"),(0,l.kt)("p",null,"For \xe5 lagre planen, trykk p\xe5 SAVE her"),(0,l.kt)("p",null,(0,l.kt)("img",{src:r(7424).Z})),(0,l.kt)("p",null,'Planer blir f\xf8rst opprettet i Staging-omr\xe5det. Der er da ikke mulig \xe5 abbonnere p\xe5 dem. P\xe5 denne m\xe5ten kan man opprette planer og dobbeltsjekke at de ble riktige f\xf8r man publiserer de. N\xe5r du oppretter en plan f\xf8r den er publisert vil du derfor ikke se den, klikk p\xe5 "Staging" for \xe5 se planer om ikke er publisert'),(0,l.kt)("p",null,(0,l.kt)("img",{src:r(9948).Z})),(0,l.kt)("p",null,"For \xe5 gj\xf8re en plan tilgjengelig klikk p\xe5 den lille skyen med oppover-pil. ",(0,l.kt)("img",{src:r(5403).Z})," Den er n\xe5 tilgjengelig i portalen og applikasjoner kan sp\xf8rre om tilgang. Det\xa0 er fremdeles ikke ,ulig \xe5 bruke planen, , klikk p\xe5 deploy for \xe5 dytte ut konfigurasjonen av denne planen til gateway-en"),(0,l.kt)("p",null,"For \xe5 endre en planklikk p\xe5 blyanten. Man m\xe5 g\xe5 gjennomhele veisiseren p\xe5 nytt, men trenger kun \xe5 endre det som skal endres."),(0,l.kt)("h3",{id:"avslutte-planer"},"Avslutte planer"),(0,l.kt)("p",null,"For \xe5 gj\xf8re en plan utilgjengeli for nye abonneneter gj\xf8r man dem Deprecated. Eksisterende abonenter vil fortsette \xe5 fungere (TODO: sjekke om epost for \xe5 bytte blir sendt), men nye applikasjoner som vil bruke APIet m\xe5 velge et annen plan. Ved \xe5 lukke planen vil eksisterende abonnement slutte \xe5 fungere"),(0,l.kt)("h3",{id:"opprette-plan-med-f\xe5-rettigheter-og-begrensning-av-bruk"},"Opprette plan med f\xe5 rettigheter og begrensning av bruk"),(0,l.kt)("p",null,"Trykk p\xe5 + p\xe5 siden for planer for \xe5 opprette ny plan"),(0,l.kt)("p",null,"Fyll inn navn, beskrivelse og velg autentisering-methode p\xe5 de 2 f\xf8rste sidene"),(0,l.kt)("h4",{id:"hvitelisting"},"Hvitelisting"),(0,l.kt)("p",null,'P\xe5 side 3 (Restrictions), huk av for Path Authorization. I dette eksempel bruker vi fremdeles Pet Store-APIet, og vi vil bare tillatte \xe5 lese informasjon om kj\xe6ledyr. For \xe5 oppn\xe5 dette hvitelister vi en path. Trykk p\xe5 "+ Add" under whitelist for \xe5 lage en ny\xa0 og fyll inn path pattern og tillate methoder. F.eks. /pet/** som path og huke av for GET for \xe5 gi lese-rettigheter til\xa0 kj\xe6ledyr'),(0,l.kt)("p",null,(0,l.kt)("img",{src:r(6063).Z})),(0,l.kt)("p",null,"Du kan legge p\xe5 s\xe5 mange path pattern i hvitelist som du vil. N\xe5r du har lagt inn en eller flere hviteliste(r) vil alle andre paths v\xe6re svartelistet. Tilsvarende til alle endre v\xe6re godkjente om du svartelister en eller flere path-er."),(0,l.kt)("p",null,"Det fungerer ikke \xe5 kombinere svartlister og hvitelister (TODO: teste at det er slik) Om begge typer er definert vil kun hvitelistene fungere (TODO: test)"),(0,l.kt)("p",null,"Methods som blir brukt her blir ogs\xe5 kalt HTTP verbs"),(0,l.kt)("p",null,"Path patterns som blir brukt er ",(0,l.kt)("a",{parentName:"p",href:"http://ant.apache.org/"},"Ant Path Patterns"),". Du fungerer slik:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"? betyr et tegn (men ikke / )"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"betyr null eller flere tegn (men ikke / )"))),(0,l.kt)("li",{parentName:"ul"},"** betyr null eller flere mappe-segmenter")),(0,l.kt)("p",null,"Om du vil vite mer om Ant Patterns er ",(0,l.kt)("a",{parentName:"p",href:"https://confluence.atlassian.com/fisheye/pattern-matching-guide-960155410.html"},"denne veiledningen god,")," det finnes ogs\xe5 ",(0,l.kt)("a",{parentName:"p",href:"http://ant.apache.org/manual/dirtasks.html#patterns"},"offisiell dokumentasjon")),(0,l.kt)("h4",{id:"svartelisting"},"Svartelisting"),(0,l.kt)("p",null,"I dette eksempelet har man lov til \xe5 bruke APIet a\xe5 mye man vil og man har tilgang til alle ressuser bortsett fra \xe5 slette ordre. Det er gjort ved \xe5 svarteliste pathen /store/order med http-methoden (HTTPS verb) DELETE. Om man vil svarteliste all tilgang til ordre huker man av alle."),(0,l.kt)("p",null,(0,l.kt)("img",{src:r(357).Z})),(0,l.kt)("h4",{id:"rate-limiting"},"Rate-Limiting"),(0,l.kt)("p",null,"I tillegg til \xe5 begrense hvilke ressurser som er tilgengelig via APIet kan man ogs\xe5 begrense hvor ofte en konsument kan kontakte et API. Det gj\xf8res med Rate-limiting eller kvoter (Quota) Kvoter er mest brukt for APIer hvor man betaler for. Rate-limiting brukes ogs\xe5 ofte p\xe5 betal-APIer hvor det er mindre begrensninger jo mer man betaler. Rate-limiting kan ogs\xe5 brukes for \xe5 beskytte et API om backend-serveren har ytelsesproblemer."),(0,l.kt)("p",null,"Skjermskudd av eksempel hvor man tillater 2 requests per minutt:"),(0,l.kt)("p",null,(0,l.kt)("img",{src:r(2394).Z})))}m.isMDXComponent=!0},7043:function(e,t,r){t.Z=r.p+"assets/images/image-20200928124644-1-b1764559e7b57ce2198043795e54e56c.png"},1154:function(e,t,r){t.Z=r.p+"assets/images/image-20200928150931-1-b2011347466eb35da08f6ef633e87aa7.png"},9396:function(e,t,r){t.Z=r.p+"assets/images/image-20200928152040-3-ee8bbebbe3c5a75f231f40c3df064ca9.png"},7424:function(e,t,r){t.Z=r.p+"assets/images/image-20200928155158-6-4c445ae3447bd4cc2cba507e23addc72.png"},9948:function(e,t,r){t.Z=r.p+"assets/images/image-20200928155423-7-2dc2c7cdee2572daa61358b3e8a898e0.png"},5403:function(e,t){t.Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAAAcCAYAAAA6EgJRAAAABHNCSVQICAgIfAhkiAAAA31JREFUWEftlk1ME0EUx/+0KkGlBTRW8CNWiG0CJfHgx0HkAhfBCJoQ4eZNvavx4NGLno1exJOQgAoGmsjBRAKGQA8mbSU2FipigRIRKNJCpdV9azZsd2e3A9QDZl/SNDv7Zt7Mb//vvclJJBK/YZhIwGRwWCdgwJCpwYDxr2EEAgF4PJ5tl4E7sr1jr9eL3t5ecdlIJIL6+nquECOh7/CHFxBPrKFwTy4OFezGaft+5O0yc83PhlPWYcg3RWCsViuqqqo09xpeiKF1IIgfy6synyWQrvr8YVw9Y0fl4ULN+dKLxecvEBscQfHjB5q+mXyyVjNCoRA6OztRXl6epoaVlRXNzc39XMWjt58UINbd47+SeDYYBAHLZLGBYUTbXmL6xm2mK4GYuXkHq96PSC0sMn2yogwC0dHRgWQyKf43NTWJwSYmJlBbW6sKHE8kEZyN4o1/CnRguZUeyMfY7FLaGCnn3sVK1TrygeInD8VHAkImV4gEIrfCiaPuNpgKrMy1crZ66aJi2d3dLYKQzG63i0DMZnW+B4WDtg58VkGguaeO7UPL2eOg+tE+HErb8LVzZVzpMn39FqLtr2BpuSIC4QVBwbakDALR1dWFVCrFJK0cpLTIBILmUOEkkwOhdHEJteP8CRvKBPVomVwha1+/CXVkGJkUIa21aWVogdBTxVPhQP5v86pzSIpQvmAphHx4VDJ5oRmx9yMwWS0o9b7TTA15zE0VUC0QDodDMz0o6NS8uhDm7TSjaG+uUD/CaSwIBHWYEqHFKu31h0nlUNqz2DUIhCUfqcUoInfv6/pLLzcMQw9EY2Mjs05IwdLb599RKqB9QiGln9wIBo1NMToJax1prrxGlPr6YWm+rNtl5DE3VDN8Ph/cbreqRpAiCITJpM+2pCBPOFyc6yttxolVLPW6jDIGN4zR0VH09PQo58PpdKKhoSEjCJpY7Tio6hLyBeWpMr+cUMWSBoqEG6rSWCAkH14g3DDGxsaU8UGK4AVBk6lLBCNReL7MqdaiAWWqMJ2EwUsnj6he0aVLr2tIQKRLF+uuwd1NSBWUJpK5XC7U1dVxKUK5c6oH/YGZDadMhdBaq3VaK90sWYeUx9fz4YYxNDSE8fFxcV2bzYaamhrlGbf9MzeMbX9SjgPol3+OBf4nFwOG7GsaMAwY7OQ2lGEow1AGm4ChDDaXPwhaqigoXamEAAAAAElFTkSuQmCC"},6063:function(e,t,r){t.Z=r.p+"assets/images/image-20200930180731-1-70b8a67a7c3eeb2737af02a431ae96af.png"},2394:function(e,t,r){t.Z=r.p+"assets/images/image-20201001125524-1-6b8823c320faa30bb835cac57619d503.png"},357:function(e,t,r){t.Z=r.p+"assets/images/image-20201001130341-3-fa8bd80def0416aa0cf48b91bd92fe0d.png"}}]);