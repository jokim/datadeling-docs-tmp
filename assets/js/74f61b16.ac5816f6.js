"use strict";(self.webpackChunkprod=self.webpackChunkprod||[]).push([[8694],{3905:function(e,t,r){r.d(t,{Zo:function(){return k},kt:function(){return m}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},k=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,k=s(e,["components","mdxType","originalType","parentName"]),d=p(r),m=a,f=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return r?n.createElement(f,o(o({ref:t},k),{},{components:r})):n.createElement(f,o({ref:t},k))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var p=2;p<i;p++)o[p]=r[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},6909:function(e,t,r){r.r(t),r.d(t,{assets:function(){return k},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var n=r(3117),a=r(102),i=(r(7294),r(3905)),o=["components"],s={title:"Infrastrukturen til IntArks tekniske plattform"},l=void 0,p={unversionedId:"datadeling/teknisk-plattform/infrastruktur",id:"datadeling/teknisk-plattform/infrastruktur",title:"Infrastrukturen til IntArks tekniske plattform",description:"IntArk sin tekniske plattform kj\xf8rer p\xe5 en Kubernetes-distribusjon som er",source:"@site/docs/datadeling/teknisk-plattform/infrastruktur.md",sourceDirName:"datadeling/teknisk-plattform",slug:"/datadeling/teknisk-plattform/infrastruktur",permalink:"/datadeling-docs-tmp/docs/datadeling/teknisk-plattform/infrastruktur",editUrl:"https://github.com/jokim/datadelingsdokumentasjon/tree/master/docs/datadeling/teknisk-plattform/infrastruktur.md",tags:[],version:"current",frontMatter:{title:"Infrastrukturen til IntArks tekniske plattform"},sidebar:"tutorialSidebar",previous:{title:"Gravitee",permalink:"/datadeling-docs-tmp/docs/datadeling/teknisk-plattform/gravitee"},next:{title:"F\xf8ringer for bruk av teknisk plattform i IntArk",permalink:"/datadeling-docs-tmp/docs/datadeling/teknisk-plattform/krav"}},k={},u=[{value:"OKD OpenShift Kubernetes",id:"okd-openshift-kubernetes",level:3},{value:"Lastbalanserer",id:"lastbalanserer",level:3},{value:"IP-ranges",id:"ip-ranges",level:3}],d={toc:u};function m(e){var t=e.components,s=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"IntArk sin tekniske plattform kj\xf8rer p\xe5 en Kubernetes-distribusjon som er\ninstallert i ",(0,i.kt)("a",{parentName:"p",href:"https://nrec.no"},"NREC"),", i osl-sonen."),(0,i.kt)("h3",{id:"okd-openshift-kubernetes"},"OKD OpenShift Kubernetes"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://okd.io"},"OKD"),' er "The Community Distribution of Kubernetes that powers\n',(0,i.kt)("a",{parentName:"p",href:"https://www.openshift.com"},"Red Hat OpenShift"),'", og er upstream-versjonen av\nOpenShift. Det blir i dagligtale ofte omtalt som ',(0,i.kt)("em",{parentName:"p"},"OpenShift"),"."),(0,i.kt)("p",null,"IntArk-plattformen har egne clustre som kj\xf8rer p\xe5 NREC i osl-sonen. De er\ninstallert med ",(0,i.kt)("em",{parentName:"p"},"ovs-multitenant SDN plugin"),", og hvert prosjekt (namespace) er\nnettverksmessig isolert."),(0,i.kt)("p",null,"Hver institusjon som bruker IntArk-plattformen har hvert sitt prosjekt hvor\nGravitee, RabbitMQ og BROM kj\xf8rer."),(0,i.kt)("p",null,"Oppgraderinger av OKD er basert p\xe5 blue-green-metodikk. Det vil si at\noppgraderinger skjer ved \xe5 installere nytt cluster med nyeste versjon av\nalle komponenter, og deretter flytte applikasjonene fra et cluster til et\nannet. Dette betyr at alle tjenester vil bytte IP-adresse ved oppgraderinger."),(0,i.kt)("h3",{id:"lastbalanserer"},"Lastbalanserer"),(0,i.kt)("p",null,"Det st\xe5r en lastbalanserer i forkant som sender trafikk til riktig cluster.\nDenne har samme IP-adresse for alle, og bruker ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Server_Name_Indication"},"Server Name Indication\n(SNI)")," for \xe5 route\ntrafikken til riktig sted. I web-verdenen har dette v\xe6rt standard lenge og man\nbeh\xf8ver vanligvis ikke tenke p\xe5 dette. N\xe5r man skal koble til en meldingsk\xf8 m\xe5\nman derimot ofte spesifisere at man skal bruke SNI."),(0,i.kt)("p",null,(0,i.kt)("img",{loading:"lazy",alt:"Tekniske komponenter i IntArk-plattformen",src:r(154).Z,width:"1754",height:"936"})),(0,i.kt)("h3",{id:"ip-ranges"},"IP-ranges"),(0,i.kt)("p",null,"IntArk sin tekniske plattform kj\xf8rer i regionen ",(0,i.kt)("em",{parentName:"p"},"osl")," til NREC. Hvis du \xf8nsker\n\xe5 lage brannmurregler som ikke trenger hyppige oppdateringer anbefaler vi \xe5\n\xe5pne for alle subnettene til NREC. Se ",(0,i.kt)("a",{parentName:"p",href:"https://iaas.readthedocs.io/team/installation/ip.html"},"NREC sin oversikt hvilke nettverk de\nbruker"),"."),(0,i.kt)("p",null,"Vi anbefaler ",(0,i.kt)("strong",{parentName:"p"},"ikke")," \xe5 sperre ned til spesifikke IP-adresser, fordi:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"IntArk-installasjonene bytter cluster ved oppgraderinger"),(0,i.kt)("li",{parentName:"ol"},"Tjenester kan bytte IP-adresse"),(0,i.kt)("li",{parentName:"ol"},"Cluster utvides fortl\xf8pende med nye servere")),(0,i.kt)("p",null,"Ulempen ved \xe5 \xe5pne for alle subnettene til NREC, eller til et spesifikt\ncluster, er at de deles av andre institusjoner. Hvis du har API med strenge\nkrav til brannmurregler anbefaler vi at du kj\xf8rer dette via en\nhttp-proxy-server som krever brukernavn og passord."))}m.isMDXComponent=!0},154:function(e,t,r){t.Z=r.p+"assets/images/intark-komponenter-630785cbecd15233752216c5c4523dbd.png"}}]);